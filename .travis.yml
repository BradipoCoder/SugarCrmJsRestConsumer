dist: trusty

language: node_js

sudo: required

node_js:
  - node

cache:
  directories:
    - $HOME/.composer/cache

env:
  global:
    - VHOST_FILE="$TRAVIS_BUILD_DIR/test/.travis/apache.vhost"
    - PHP_INI_FILE="$TRAVIS_BUILD_DIR/test/.travis/php.ini"
    - PHP_FCGI_FILE="$TRAVIS_BUILD_DIR/test/.travis/php5.fcgi"

addons:
  apt:
    sources:
      - sourceline: 'deb http://ppa.launchpad.net/ondrej/php/ubuntu trusty main'
        key_url: 'http://keyserver.ubuntu.com:11371/pks/lookup?op=get&search=0x4F4EA0AAE5267A6C'
    packages:
      - apache2
      - libapache2-mod-fcgid
      - php5.6-cgi
      - php5.6-cli
      - php5.6-common
      - php5.6-curl
      - php5.6-gd
      - php5.6-intl
      - php5.6-json
      - php5.6-mbstring
      - php5.6-mcrypt
      - php5.6-mysql
      - php5.6-opcache
      - php5.6-readline
      - php5.6-xml

before_install:
  #

install:
  #

before_script:
  - mkdir $HOME/httpdocs
  - mkdir $HOME/tmp
  - mkdir $HOME/fcgi-bin
  - mkdir -p $HOME/etc/php5
  - cd $HOME/httpdocs
  - cp $TRAVIS_BUILD_DIR/test/.travis/index.php ./index.php
  - cp $PHP_INI_FILE $HOME/etc/php5
  - cp $PHP_FCGI_FILE $HOME/fcgi-bin
  - chmod 744 $HOME/fcgi-bin/php5.fcgi
  - php -v
  - php -m
  # Configure Apache
  - sudo a2enmod alias actions rewrite fcgid suexec
  - sudo cat /etc/apache2/sites-available/000-default.conf
  - cat $VHOST_FILE | sed -e "s,PATH,/home/travis/httpdocs,g" | sudo tee /etc/apache2/sites-available/000-default.conf > /dev/null
  - sudo service apache2 restart
  - wget -qO- http://localhost


script:
#  - npm test
  - echo "TEST GOES HERE ;)"

services:
  - mysql

branches:
  only:
    - master
